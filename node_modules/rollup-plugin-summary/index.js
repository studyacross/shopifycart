"use strict";var e=require("rollup-plugin-filesize"),i=require("as-table"),o=require("chalk");function t(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var a=t(e),l=t(i);function r(e,i){return null==e?i:e}module.exports=function(e={}){function i(e){let[i,o]=e.split(" ");switch(o){case"B":return parseFloat(i);case"KB":return 1e3*parseFloat(i);case"MB":return 1e6*parseFloat(i);case"GB":return 1e9*parseFloat(i);default:return i}}function t(e){return e.toLocaleString("en",{maximumFractionDigits:2})}function n({value:e,isTotal:i,warnLow:a,warnHigh:l,totalLow:r,totalHigh:n,colored:s=!0}={}){let u;switch(e=parseFloat(e),!0){case e<1e3:u=t(e)+" B";break;case e>=1e3&&e<1e6:u=t(e/1e3)+" KB";break;case e>=1e6&&e<1e9:u=t(e/1e6)+" MB";break;case e>=1e9&&e<1e12:u=t(e/1e6)+" GB";break;default:u=String(e.toFixed())}if(s){const t=i?n:l;return function(e,i){switch(i){case"green":return o.green(e);case"yellow":return o.yellowBright(e);case"red":return o.red(e)}}(u,e<(i?r:a)?"green":e<t?"yellow":"red")}return u}let s=[],u={Name:"",Size:"",Minified:"",Gzipped:"",Brotli:""},z=0,d=0,p=0,h=0;const w={warnLow:r(e.warnLow,5e3),warnHigh:r(e.warnHigh,1e4),totalLow:r(e.totalLow,2e5),totalHigh:r(e.totalHigh,3e5),showBrotliSize:r(e.showBrotliSize,!0),showGzippedSize:r(e.showGzippedSize,!0),showMinifiedSize:r(e.showMinifiedSize,!0)};return{name:"rollup-plugin-summary",generateBundle:async function(...e){z=d=p=h=0,s=[],await a.default({showBrotliSize:w.showBrotliSize,showGzippedSize:w.showGzippedSize,showMinifiedSize:w.showMinifiedSize,reporter:(e,o,{fileName:t,bundleSize:a,minSize:l,gzipSize:r,brotliSize:c})=>{z+=i(a);const S={Name:t,Size:n({value:i(a),...w})};w.showMinifiedSize&&(d+=i(l),S.Minified=n({value:i(l),...w})),w.showGzippedSize&&(p+=i(r),S.Gzipped=n({value:i(r),...w})),w.showBrotliSize&&(h+=i(c),S.Brotli=n({value:i(c),...w})),s.push(S);var f,B;u.Name=(f=u.Name,B=t,f.length>B.length?f:B)}}).generateBundle(...e),u={Name:u.Name,Size:n({value:z,isTotal:!0,...w,colored:!1})},w.showMinifiedSize&&(u.Minified=n({value:d,isTotal:!0,...w,colored:!1})),w.showGzippedSize&&(u.Gzipped=n({value:p,isTotal:!0,...w,colored:!1})),w.showBrotliSize&&(u.Brotli=n({value:h,isTotal:!0,...w,colored:!1}));const t=e=>"-".repeat(e);s=s.sort(((e,i)=>e.Name.localeCompare(i.Name)));const r={Name:t(u.Name.length),Size:t(u.Size.length)},c={Name:"Total",Size:n({value:z,isTotal:!0,...w})};w.showMinifiedSize&&(r.Minified=t(u.Minified.length),c.Minified=n({value:d,isTotal:!0,...w})),w.showGzippedSize&&(r.Gzipped=t(u.Gzipped.length),c.Gzipped=n({value:p,isTotal:!0,...w})),w.showBrotliSize&&(r.Brotli=t(u.Brotli.length+2),c.Brotli=n({value:h,isTotal:!0,...w})),s.push(r,c),console.info(`\n${o.bold("ðŸ“„ Generated files:\n")}\n${l.default(s.map((e=>{const i={Name:e.Name,Size:e.Size};return w.showMinifiedSize&&(i.Minified=e.Minified),w.showGzippedSize&&(i.Gzipped=e.Gzipped),w.showBrotliSize&&(i.Brotli=e.Brotli),i})))}\n`)}}};
//# sourceMappingURL=index.js.map
